<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Network</title>
    <script
      type="text/javascript"
      src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"
    ></script>
    <script src="https://cdn.jsdelivr.net/npm/animejs@3.0.1/lib/anime.min.js"></script>

    <script>
      document.addEventListener("keydown", function () {
        var x = event.keyCode || event.which;
        if (x == 191) {
          var y = document.getElementById("help");
          if (y.style.display === "block") {
            document.getElementById("help").style.display = "none";
          }
          else {
            document.getElementById("help").style.display = "block";
          }
        }
      })  

      window.addEventListener("load", function () {
          let myAnimation = anime({
            targets: '#mynetwork',
            easing: 'easeInOutSine',
            duration: 1500,
            opacity: 1
          });
        });
    </script>

    <style type="text/css">
      #mynetwork {
        width: 100vw;
        height: 100vh;
        opacity: 0;
      }
      #topright{
        position: absolute;
        right: 1rem;
        top: 1rem;
        color: white;
        font-family: 'Courier New', Courier, monospace;
        text-align: right;
        z-index: 1;
        background-color: black;
        padding: 1rem;
        opacity: 0.5;
      }
      #help{
        display: none;
      }
      body{
        background-color: black;
      }
    </style>
  </head>
  <body>
    <div id="topright">
      <p>
        <strong>PC5131 Website</strong>
      </p>
      <p>By Prannaya, Khang, Pin Che and Markus</p>
      <p>Press "?" for instructions</p>
      <div id="help">
        <p>Click and drag to move nodes or move</p>
        <p>Double click to open page</p>
        <p>Scroll to zoom</p>
        <p>Press "?" to hide/show this menu</p>
      </div>
    </div>
    <div id="mynetwork" align="center"></div>
    <script type="text/javascript">
      // create an array with nodes
      var nodes = new vis.DataSet([
        { id: 1, label: "Molecular\nCloud", margin:20, url: "./beginning/molecular_cloud/" , level:0},
        { id: 2, label: "Protostars", margin:20, url: "./beginning/protostar/" , level: 1 },

        { id: 20, label: "Herbig Ae/Be Star", margin: 20, url: "./beginning/herbig-ae-be/", level: 3 },
        { id: 21, label: "T-Tauri Star", margin: 20, url: "./beginning/t-tauri/", level: 3 },
        
        { id: 3, label: "Massive\nStar", margin:20, url: "./stars/massive_star/" , level: 4 },
        { id: 4, label: "Low Mass\nStar", margin:20, url: "./stars/low_mass_star/" , level: 4 },
        { id: 5, label: "Brown\nDwarf", margin:20, url: "./dwarves/brown_dwarf/" , level: 4},

        { id: 6, label: "Red\nSupergiant", margin:20, url: "./giants/red_supergiant/" , level: 5 },
        { id: 13, label: "Red\nGiant", margin: 20, url: "./giants/red_giant/", level: 5 },

        { id: 7, label: "Type II\nSupernova", margin:20, url: "./nova/type_2_supernova/" , level: 6 },
        { id: 14, label: "Binary\nWhite\nDwarf", margin: 20, url: "./dwarves/binary_white_dwarf/", level: 6 },

        { id: 15, label: "Nova", margin: 20, url: "./nova/nova/" , level: 8 },
        { id: 17, label: "Planetary\nNebula", margin: 20, url: "./others/planetary_nebula/" , level: 8 },
        { id: 16, label: "Type Ia\nSupernova", margin: 20, url: "./nova/type_1a_supernova/" , level: 8 },
        { id: 8, label: "Supernova\nRemnant", margin:20, url: "./nova/supernova_remnant/" , level: 8 },
        { id: 9, label: "Black\nHole", margin:20, url: "./others/black_hole/" , level: 8 },
        { id: 11, label: "Neutron\nStar", margin: 20, url: "./others/neutron_star/" , level: 8 },

        { id: 10, label: "X-Ray\nEmission", margin:20, url: "./others/x_ray_emission/" , level: 9 },
        { id: 18, label: "White\nDwarf", margin: 20, url: "./dwarves/white_dwarf/", level: 9 },
        { id: 12, label: "Pulsar", margin: 20, url: "./others/pulsar/", level: 9 },
        
        { id: 19, label: "Black\nDwarf", margin: 20, url: "./dwarves/black_dwarf/", level: 10 },


      ]);

      // create an array with edges
      var edges = new vis.DataSet([
        { from: 1, to: 2, arrows: "to" },

        { from: 2, to: 21, arrows: "to" , label: "<2 Msun", font: { multi: "md" } },
        { from: 2, to: 20, arrows: "to", label: "2-10 Msun", font: { multi: "md" } },

        { from: 21, to: 5, arrows: "to" , label: "<0.08 \nMsun", font: { multi: "md" } },
        { from: 21, to: 4, arrows: "to", label: ">0.08 \nMsun", font: { multi: "md" } },
        { from: 20, to: 3, arrows: "to" },
      
        { from: 6, to: 7, arrows: "to" },
        { from: 3, to: 6, arrows: "to" },
        { from: 7, to: 8, arrows: "to" },
        { from: 7, to: 9, arrows: "to", label: "> 40 Msun", font: { multi: "md" } },
        { from: 9, to: 10, arrows: "to" },
        { from: 7, to: 11, arrows: "to", label: "< 40 Msun", font: { multi: "md" } },
        { from: 11, to: 12, arrows: "to" },
        { from: 4, to: 13, arrows: "to" },
        { from: 13, to: 14, arrows: "to" },
        { from: 13, to: 17, arrows: "to" },
        { from: 17, to: 18, arrows: "to" },
        { from: 18, to: 19, arrows: "to" },
        { from: 14, to: 15, arrows: "to", label: "< 1.4 Msun", font: { multi: "md" } },
        { from: 14, to: 16, arrows: "to", label: "> 1.4 Msun", font: { multi: "md" } },
        { from: 15, to: 18, arrows: "to" },

      ]);

      // create a network
      var container = document.getElementById("mynetwork");
      var data = {
        nodes: nodes,
        edges: edges,
      };

        var options = {
          edges: {
            smooth: {
              type: "cubicBezier",
              forceDirection: "horisontal",
              roundness: 0,
            },
            color: "#ffffff",
          },

          layout: {
            hierarchical: {
              direction: "LR",
              sortMethod: "directed",
              shakeTowards:"roots",
              levelSeparation: 150,
              //"nodeSpacing": 200,
            },
          },

          physics: {
            "minVelocity": 0.49,
            "forceAtlas2Based": {
              "springLength": 100
            },
            "minVelocity": 0.1,
            solver: 'hierarchicalRepulsion',
          },

          nodes: {
            shape: "box",
            color: {
              border: "#ffffff",
              background: "#000000",
              highlight:{
                border: "#ffffff",
                background: "#000000",
              },
              hover: {
                border: "#ffffff",
                background: "#000000",
              },
            },
            font: {
              color: "#ffffff",
              face: "Courier",
            },
          },
        };
      var network = new vis.Network(container, data, options);

       network.on("doubleClick", function (params) {
   if (params.nodes.length === 1) {
        var node = nodes.get(params.nodes[0]);
        if(node.url != null) {
        window.open(node.url, '_blank');
        }
        }
    });

      network.once("beforeDrawing", function () {
          network.focus(2, {
            scale: 8,
          });
        });
        network.once("afterDrawing", function () {
          network.fit({
            animation: {
              duration: 5000,
              easingFunction: "easeOutQuint",
            },
          });
        });

    </script>
  </body>
</html>